---
layout: post
title: "MySQL/MariaDB ì½˜ì†”ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ë° ë³µêµ¬ ì™„ë²½ ê°€ì´ë“œ"
date: 2023-06-20 10:00:00 +0900
categories: [Development, Database]
tags: [mysql, mariadb, database, backup, restore, console, mysqldump]
author: "Kevin Park"
lang: ko
excerpt: "GUI íˆ´ ì—†ì´ ì½˜ì†”ì—ì„œ MySQL/MariaDB ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê³  ë³µêµ¬í•˜ëŠ” ë°©ë²•. í˜¸ìŠ¤íŒ… í™˜ê²½ì—ì„œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´ ëª¨ìŒì§‘"
---

# MySQL/MariaDB ì½˜ì†”ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ë° ë³µêµ¬ ì™„ë²½ ê°€ì´ë“œ

## ğŸ¯ í•µì‹¬ í•´ê²°ì±… (ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥)

í˜¸ìŠ¤íŒ…ì´ë‚˜ ì œí•œì ì¸ í™˜ê²½ì—ì„œ GUI íˆ´ ì—†ì´ ì½˜ì†”ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°±ì—…í•˜ê³  ë³µêµ¬í•´ì•¼ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ë“¤ì…ë‹ˆë‹¤.

### ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´

#### 1. ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… (ê°€ì¥ ì¼ë°˜ì )
```bash
# ê¸°ë³¸ ë°±ì—…
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [ë°ì´í„°ë² ì´ìŠ¤ëª…] > backup.sql

# ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
mysqldump -umyuser -pmypassword mywebsite_db > website_backup_20230620.sql
```

#### 2. ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ ë³µêµ¬
```bash
# ê¸°ë³¸ ë³µêµ¬
mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [ë°ì´í„°ë² ì´ìŠ¤ëª…] < backup.sql

# ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
mysql -umyuser -pmypassword mywebsite_db < website_backup_20230620.sql
```

#### 3. ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… (ì„œë²„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ)
```bash
# ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] --all-databases > full_backup.sql

# ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
mysqldump -uroot -pmypassword --all-databases > full_server_backup_20230620.sql
```

### âš ï¸ ì¤‘ìš”í•œ ì‚¬ìš©ë²• ì£¼ì˜ì‚¬í•­
- **-uì™€ -p ë’¤ì— ê³µë°± ì—†ì´** ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë¶™ì—¬ì„œ ì‘ì„±
- íŒ¨ìŠ¤ì›Œë“œì— íŠ¹ìˆ˜ë¬¸ìê°€ ìˆìœ¼ë©´ ì‘ì€ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°: `-p'my@pass!'`
- ë°±ì—… íŒŒì¼ëª…ì— ë‚ ì§œ í¬í•¨ ê¶Œì¥: `backup_YYYYMMDD.sql`

---

## ğŸ“š ìƒì„¸ ì„¤ëª…

### ë°°ê²½ ë° í•„ìš”ì„±

í˜„ëŒ€ì˜ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ì—ì„œëŠ” phpMyAdmin, MySQL Workbench, DBeaver ê°™ì€ GUI íˆ´ë“¤ì´ í¸ë¦¬í•œ ë°±ì—…/ë³µêµ¬ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œëŠ” ì½˜ì†” ëª…ë ¹ì–´ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤:

- **í˜¸ìŠ¤íŒ… í™˜ê²½**: ê³µìœ  í˜¸ìŠ¤íŒ…ì—ì„œ SSH ì ‘ê·¼ë§Œ ê°€ëŠ¥í•œ ê²½ìš°
- **ì„œë²„ ìë™í™”**: í¬ë¡ íƒ­ì„ ì´ìš©í•œ ì •ê¸° ë°±ì—… ì„¤ì •
- **ëŒ€ìš©ëŸ‰ ë°ì´í„°**: GUI íˆ´ì˜ ì‹œê°„ ì œí•œì´ë‚˜ ë©”ëª¨ë¦¬ í•œê³„
- **ì›ê²© ì„œë²„**: ë„¤íŠ¸ì›Œí¬ ì œì•½ìœ¼ë¡œ GUI ì ‘ê·¼ì´ ì–´ë ¤ìš´ í™˜ê²½

### ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

#### mysqldump ì˜µì…˜ ìƒì„¸ ì„¤ëª…

```bash
# êµ¬ì¡°ë§Œ ë°±ì—… (ë°ì´í„° ì œì™¸)
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] --no-data [DBëª…] > structure_only.sql

# ë°ì´í„°ë§Œ ë°±ì—… (êµ¬ì¡° ì œì™¸)
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] --no-create-info [DBëª…] > data_only.sql

# ì••ì¶• ë°±ì—… (ìš©ëŸ‰ ì ˆì•½)
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [DBëª…] | gzip > backup.sql.gz

# íŠ¹ì • í…Œì´ë¸”ë§Œ ë°±ì—…
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [DBëª…] [í…Œì´ë¸”ëª…] > table_backup.sql
```

#### ë³µêµ¬ ì‹œ ì£¼ì˜ì‚¬í•­

```bash
# ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë¨¼ì € ìƒì„±
mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] -e "CREATE DATABASE IF NOT EXISTS [DBëª…];"

# ê·¸ í›„ ë³µêµ¬ ì‹¤í–‰
mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [DBëª…] < backup.sql
```

### ì‹¤ì œ í™œìš© ì‚¬ë¡€

#### 1. ì •ê¸° ë°±ì—… ìë™í™” (í¬ë¡ íƒ­)
```bash
# crontab -e ë¡œ í¸ì§‘
# ë§¤ì¼ ìƒˆë²½ 2ì‹œì— ë°±ì—…
0 2 * * * /usr/bin/mysqldump -umyuser -pmypass mydb > /backup/daily_$(date +\%Y\%m\%d).sql

# ë§¤ì£¼ ì¼ìš”ì¼ ìƒˆë²½ 3ì‹œì— ì „ì²´ ë°±ì—…
0 3 * * 0 /usr/bin/mysqldump -umyuser -pmypass --all-databases > /backup/weekly_$(date +\%Y\%m\%d).sql
```

#### 2. ì„œë²„ ê°„ ë°ì´í„° ì´ì „
```bash
# ì›ë³¸ ì„œë²„ì—ì„œ ë°±ì—…
mysqldump -uolduser -poldpass production_db > migration_backup.sql

# íŒŒì¼ ì „ì†¡ (scp ì‚¬ìš©)
scp migration_backup.sql user@newserver:/tmp/

# ìƒˆ ì„œë²„ì—ì„œ ë³µêµ¬
mysql -unewuser -pnewpass production_db < /tmp/migration_backup.sql
```

#### 3. ì—ëŸ¬ ì²˜ë¦¬ ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

**ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì™€ í•´ê²°ë°©ë²•:**

```bash
# ì˜¤ë¥˜: Access denied
# í•´ê²°: ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
GRANT SELECT, SHOW DATABASES ON *.* TO 'username'@'localhost';

# ì˜¤ë¥˜: Unknown database
# í•´ê²°: ë°ì´í„°ë² ì´ìŠ¤ ë¨¼ì € ìƒì„±
mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] -e "CREATE DATABASE [DBëª…];"

# ì˜¤ë¥˜: Table doesn't exist
# í•´ê²°: ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì„ì‹œ í•´ì œ í›„ ë³µêµ¬
mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] -e "SET FOREIGN_KEY_CHECKS=0;"
mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [DBëª…] < backup.sql
mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] -e "SET FOREIGN_KEY_CHECKS=1;"
```

#### 4. ëŒ€ìš©ëŸ‰ ë°ì´í„°ë² ì´ìŠ¤ ì²˜ë¦¬

```bash
# ì§„í–‰ìƒí™© í‘œì‹œí•˜ë©° ë°±ì—…
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [DBëª…] | pv > backup.sql

# ì••ì¶•ê³¼ ë™ì‹œì— ë°±ì—… (ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½)
mysqldump -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [DBëª…] | gzip > backup.sql.gz

# ì••ì¶•íŒŒì¼ ì§ì ‘ ë³µêµ¬
gunzip < backup.sql.gz | mysql -u[ì•„ì´ë””] -p[íŒ¨ìŠ¤ì›Œë“œ] [DBëª…]
```

## ê²°ë¡ 

ì½˜ì†”ì„ ì´ìš©í•œ MySQL/MariaDB ë°±ì—…ê³¼ ë³µêµ¬ëŠ” í˜¸ìŠ¤íŒ… í™˜ê²½ì´ë‚˜ ìë™í™”ê°€ í•„ìš”í•œ ìƒí™©ì—ì„œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. íŠ¹íˆ `-u`ì™€ `-p` ì˜µì…˜ ë’¤ì— ê³µë°± ì—†ì´ ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¶™ì—¬ ì“°ëŠ” ê²ƒì´ í•µì‹¬ í¬ì¸íŠ¸ì…ë‹ˆë‹¤.

**ë‹¤ìŒ ë‹¨ê³„ë¡œ ì¶”ì²œí•˜ëŠ” ë‚´ìš©:**
- ì •ê¸° ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë° í¬ë¡ íƒ­ ì„¤ì •
- ë°±ì—… íŒŒì¼ ì•”í˜¸í™” ë° ì›ê²© ì €ì¥ì†Œ ì—…ë¡œë“œ
- ë³µêµ¬ í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶• ë° ê²€ì¦ í”„ë¡œì„¸ìŠ¤ ìˆ˜ë¦½

ë°ì´í„°ëŠ” ê¸°ì—…ì˜ ìƒëª…ì…ë‹ˆë‹¤. ì •ê¸°ì ì¸ ë°±ì—…ê³¼ ë³µêµ¬ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì•ˆì „í•œ ë°ì´í„° ê´€ë¦¬ë¥¼ ì‹¤ì²œí•˜ì„¸ìš”.